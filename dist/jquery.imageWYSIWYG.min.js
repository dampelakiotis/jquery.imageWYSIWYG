/*! jQuery Imagewysiwyg - v0.1.0 - 2012-11-05
* https://github.com/nickromano/jquery.imageWYSIWYG
* Copyright (c) 2012 Nick Romano; Licensed GPL */
(function(a){"use strict";var b={init:function(b,c){this.el=b,this.$el=a(b),this.$te=this.$el.prev(),this.config=a.extend({},a.fn.imageWYSIWYG.defaults,c),this.setUpContainer()},setUpContainer:function(){this.images=a("<ul>"),this.container=a("<div>",{"class":"images-wysiwyg-container"}).html(this.images);var b=this;a.each(this.config.images,function(){b.addImage(this)}),this.$te.before(this.container),this.addButton()},addImage:function(b){var c=a("<img>",{src:b.src,alt:b.description}),d=a("<p>",{text:b.description}),e=this,f=a("<a>",{"class":"images-wysiwyg-image",href:"#"}).append(c).append(d).click(function(a){a.preventDefault(),e.openImage(this)}),g=a("<li>",{"class":"item"}).append(f);this.images.append(g)},addButton:function(){var b=this;this.addImageButton=a("<button>",{text:"Add Image","class":"images-wysiwyg-toggle-container",click:function(a){a.preventDefault(),b.openPicker()}}),this.$te.before(this.addImageButton)},openPicker:function(){this.container.css("display")==="block"?(this.container.css("display","none"),this.addImageButton.text("Add Image")):(this.container.css("display","block"),this.addImageButton.text("Close"))},openImage:function(b){var c=a(b).find("img").attr("src");this.createOverlay(),a(".images-wysiwyg-modal").html('<img src="'+c+'" alt="" />'),a(".images-wysiwyg-modal img").load(function(){var b=a(".images-wysiwyg-modal img").width(),c=a(".images-wysiwyg-modal img").height(),d=a(window),e=a(".images-wysiwyg-modal"),f=e.find("img"),g=f.width(),h=f.height(),i=g/h,j=d.width(),k=d.height(),l=Math.round(k/2*i),m=k/2;f.css({width:l,height:m}),a(".images-wysiwyg-modal").css({top:k/2-m/2,left:j/2-l/2}).animate({opacity:"1"},200,"linear")})},createOverlay:function(){a("body").append('<div class="images-wysiwyg-overlay"></div><div class="images-wysiwyg-modal"></div>').css({"overflow-y":"hidden"}),a(".images-wysiwyg-overlay").animate({opacity:"0.6"},200,"linear").click(function(){a(".images-wysiwyg-modal, .images-wysiwyg-overlay").animate({opacity:"0"},200,"linear",function(){a(".images-wysiwyg-modal, .images-wysiwyg-overlay").remove()})})}};a.fn.imageWYSIWYG=function(a){var c=Object.create(b);return this.each(function(){c.init(this,a)})},a.fn.imageWYSIWYG.defaults={images:[]}})(jQuery);